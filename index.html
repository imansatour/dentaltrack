<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dental Track - Gestión de Laboratorios</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React y ReactDOM (Versión UMD - Más compatible) -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide Icons (Versión Base) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 h-screen overflow-hidden">
    <div id="root"></div>

    <script type="text/babel">
        // --- CONFIGURACIÓN SEGURA ---
        const { useState, useEffect, useRef } = React;

        // Función auxiliar para crear iconos de Lucide de forma segura sin módulos
        // Esto soluciona el error "Element type is invalid"
        const Icon = ({ name, size = 20, className, ...props }) => {
            const lucideIcons = window.lucide ? window.lucide.icons : {};
            // Convertimos nombres como 'LayoutDashboard' a la key que usa lucide
            const iconName = name; 
            const iconNode = lucideIcons[iconName];

            if (!iconNode) {
                // Fallback invisible si falla la carga
                return <span style={{width: size, height: size, display: 'inline-block'}} />;
            }

            return React.createElement(
                "svg",
                {
                    ...props,
                    width: size,
                    height: size,
                    viewBox: "0 0 24 24",
                    fill: "none",
                    stroke: "currentColor",
                    strokeWidth: 2,
                    strokeLinecap: "round",
                    strokeLinejoin: "round",
                    className: `lucide lucide-${name} ${className || ""}`,
                    dangerouslySetInnerHTML: { 
                        __html: iconNode.map(child => {
                            const [tag, attrs] = child;
                            // Reconstrucción simple de SVG para compatibilidad máxima
                            const attrString = Object.entries(attrs)
                                .map(([key, val]) => `${key}="${val}"`)
                                .join(' ');
                            return `<${tag} ${attrString} />`;
                        }).join('') 
                    }
                }
            );
        };

        // Componentes wrapper para los iconos usados
        const LayoutDashboard = (props) => <Icon name="LayoutDashboard" {...props} />;
        const FolderPlus = (props) => <Icon name="FolderPlus" {...props} />;
        const Search = (props) => <Icon name="Search" {...props} />;
        const MessageSquare = (props) => <Icon name="MessageSquare" {...props} />;
        const Clock = (props) => <Icon name="Clock" {...props} />;
        const CheckCircle2 = (props) => <Icon name="CheckCircle2" {...props} />;
        const FileText = (props) => <Icon name="FileText" {...props} />;
        const Upload = (props) => <Icon name="Upload" {...props} />;
        const Users = (props) => <Icon name="Users" {...props} />;
        const Bell = (props) => <Icon name="Bell" {...props} />;
        const ChevronRight = (props) => <Icon name="ChevronRight" {...props} />;
        const Package = (props) => <Icon name="Package" {...props} />;
        const CalendarIcon = (props) => <Icon name="Calendar" {...props} />;
        const AlertCircle = (props) => <Icon name="AlertCircle" {...props} />;
        const Stethoscope = (props) => <Icon name="Stethoscope" {...props} />;
        const Microscope = (props) => <Icon name="Microscope" {...props} />;
        const Menu = (props) => <Icon name="Menu" {...props} />;
        const X = (props) => <Icon name="X" {...props} />;
        const Send = (props) => <Icon name="Send" {...props} />;
        const Paperclip = (props) => <Icon name="Paperclip" {...props} />;
        const ImageIcon = (props) => <Icon name="Image" {...props} />;
        const MoreVertical = (props) => <Icon name="MoreVertical" {...props} />;
        const Sparkles = (props) => <Icon name="Sparkles" {...props} />;
        const Loader2 = (props) => <Icon name="Loader2" {...props} />;
        const ChevronLeft = (props) => <Icon name="ChevronLeft" {...props} />;
        const CreditCard = (props) => <Icon name="CreditCard" {...props} />;
        const DollarSign = (props) => <Icon name="DollarSign" {...props} />;
        const Download = (props) => <Icon name="Download" {...props} />;
        const Trash2 = (props) => <Icon name="Trash2" {...props} />;
        const Check = (props) => <Icon name="Check" {...props} />;

        // --- DATOS INICIALES ---

        const INITIAL_CASES = [
            {
                id: "CAS-2024-001",
                patientInitials: "F.H.B.",
                patientId: "P-8842",
                doctor: "Dr. Alejandro Belmonte",
                type: "Corona Zirconio Monolítico",
                teeth: "16, 17",
                status: "design",
                priority: "normal",
                createdDate: "2024-02-01",
                dueDate: "2024-02-10",
                description: "Color A2, oclusión ligera. Paciente bruxista. Se requiere refuerzo en cúspides funcionales.",
                materials: [{ type: "Disco Zirconio", brand: "Katana", batch: "BATCH-9923", ref: "STML-A2" }],
                timeline: [
                    { status: "received", date: "2024-02-01 09:30", note: "Recibido escaneo intraoral" },
                    { status: "design", date: "2024-02-02 11:00", note: "Diseño CAD iniciado" }
                ],
                messages: [
                    { sender: "Clinica", user: "Dr. Belmonte", text: "Adjunto escaneo. Por favor, cuidado con el punto de contacto mesial.", time: "09:35", role: "clinic" },
                    { sender: "Laboratorio", user: "Téc. Iman Satour", text: "Recibido doctor. Lo tendremos en cuenta en el diseño.", time: "10:15", role: "lab" }
                ],
                files: [
                    { name: "scan_upper_jaw.stl", type: "3d", date: "2024-02-01" },
                    { name: "foto_color.jpg", type: "image", date: "2024-02-01" }
                ]
            },
            {
                id: "CAS-2024-002",
                patientInitials: "E.G.G.",
                patientId: "P-9901",
                doctor: "Dra. Laura García",
                type: "Prótesis Híbrida Superior",
                teeth: "Arcada Superior",
                status: "production",
                priority: "high",
                createdDate: "2024-01-28",
                dueDate: "2024-02-08",
                description: "Estructura barra fresada sobre 4 implantes.",
                materials: [],
                timeline: [
                    { status: "received", date: "2024-01-28 16:00", note: "Impresiones físicas recibidas" },
                    { status: "design", date: "2024-01-29 10:00", note: "Diseño de barra aprobado" },
                    { status: "production", date: "2024-02-02 09:00", note: "Fresado de estructura en curso" }
                ],
                messages: [],
                files: []
            },
            {
                id: "CAS-2024-003",
                patientInitials: "C.R.L.",
                patientId: "P-1022",
                doctor: "Dr. Alejandro Belmonte",
                type: "Férula de descarga",
                teeth: "Superior",
                status: "sent",
                priority: "normal",
                createdDate: "2024-01-25",
                dueDate: "2024-01-30",
                finishDate: "2024-01-30",
                description: "Michigan rígida, guías caninas marcadas.",
                materials: [{ type: "Resina Impresión 3D", brand: "KeySplint", batch: "KS-2024-01", ref: "Soft" }],
                timeline: [
                    { status: "received", date: "2024-01-25", note: "" },
                    { status: "finished", date: "2024-01-29", note: "" },
                    { status: "sent", date: "2024-01-30", note: "Enviado por mensajería MRW" }
                ],
                messages: [],
                files: []
            }
        ];

        const INITIAL_PATIENTS = [
            { id: "P-8842", name: "Firdaois el Hadia Boumlik", age: 20, phone: "600 123 456", email: "firdaois.elhadia@email.com", lastVisit: "2024-02-01", status: "active" },
            { id: "P-9901", name: "Erika González Guirado", age: 23, phone: "600 987 654", email: "erika.gonzalez@email.com", lastVisit: "2024-01-28", status: "treatment" },
            { id: "P-1022", name: "Cristina Romero López", age: 20, phone: "600 555 444", email: "cristina.romero@email.com", lastVisit: "2024-01-30", status: "active" },
            { id: "P-1023", name: "Lucía Méndez Cruz", age: 34, phone: "600 222 333", email: "lucia.mendez@email.com", lastVisit: "2023-12-15", status: "archived" },
        ];

        const INITIAL_INVOICES = [
            { id: "INV-2024-001", caseId: "CAS-2024-003", patient: "Cristina Romero López", amount: 120.00, date: "2024-01-30", status: "paid" },
            { id: "INV-2024-002", caseId: "CAS-2024-001", patient: "Firdaois el Hadia Boumlik", amount: 350.50, date: "2024-02-05", status: "pending" },
            { id: "INV-2024-003", caseId: "CAS-2024-002", patient: "Erika González Guirado", amount: 2400.00, date: "2024-02-08", status: "overdue" },
        ];

        const INITIAL_NOTIFICATIONS = [
            { id: 1, title: "Nuevo Mensaje", text: "Dr. Belmonte ha comentado en el caso de Firdaois H.", time: "09:35", read: false, type: "message" },
            { id: 2, title: "Cambio de Estado", text: "Caso de Erika G. pasado a Producción", time: "10:00", read: false, type: "status" },
            { id: 3, title: "Entrega Próxima", text: "El caso de Cristina R. vence mañana", time: "Ayer", read: true, type: "alert" }
        ];

        const STATUS_CONFIG = {
            received: { label: "Recibido", color: "bg-gray-100 text-gray-600", step: 1 },
            design: { label: "En Diseño", color: "bg-blue-100 text-blue-700", step: 2 },
            production: { label: "Producción", color: "bg-purple-100 text-purple-700", step: 3 },
            testing: { label: "En Prueba", color: "bg-yellow-100 text-yellow-700", step: 4 },
            finished: { label: "Terminado", color: "bg-green-100 text-green-700", step: 5 },
            sent: { label: "Enviado", color: "bg-emerald-600 text-white", step: 6 },
        };

        // --- GEMINI API HELPER ---
        const callGeminiAPI = async (prompt) => {
            const apiKey = ""; 
            if (!apiKey) {
                console.warn("Falta la API Key de Gemini. Las funciones de IA no responderán.");
                return null;
            }
            try {
                const response = await fetch(
                    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,
                    {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] }),
                    }
                );
                if (!response.ok) throw new Error(`API Error: ${response.statusText}`);
                const data = await response.json();
                return data.candidates?.[0]?.content?.parts?.[0]?.text;
            } catch (error) {
                console.error("Error llamando a Gemini:", error);
                return null;
            }
        };

        // --- COMPONENTES UI ---

        const StatusBadge = ({ status }) => {
            const config = STATUS_CONFIG[status] || STATUS_CONFIG.received;
            return <span className={`px-2.5 py-0.5 rounded-full text-xs font-medium border border-transparent ${config.color}`}>{config.label}</span>;
        };

        const PriorityBadge = ({ priority }) => {
            if (priority === 'high') {
                return <span className="px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-700 border border-red-200 flex items-center gap-1"><AlertCircle size={10}/> Urgente</span>;
            }
            return <span className="px-2 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-600 border border-slate-200">Normal</span>;
        };
        
        const NavItem = ({ icon: Icon, label, active, collapsed, onClick }) => (
            <button 
                onClick={onClick}
                className={`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors mb-1
                ${active ? 'bg-indigo-50 text-indigo-700' : 'text-slate-600 hover:bg-slate-50 hover:text-slate-900'}
                ${collapsed ? 'justify-center' : ''}
                `}
                title={collapsed ? label : ''}
            >
                <Icon size={20} />
                {!collapsed && <span className="text-sm font-medium">{label}</span>}
            </button>
        );

        const StatCard = ({ title, value, icon, color }) => (
            <div className="bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex items-center gap-4">
                <div className={`w-12 h-12 rounded-full flex items-center justify-center ${color}`}>{icon}</div>
                <div>
                    <p className="text-slate-500 text-sm font-medium">{title}</p>
                    <h4 className="text-2xl font-bold text-slate-800">{value}</h4>
                </div>
            </div>
        );

        // --- APP LOGIC ---

        function App() {
            const [cases, setCases] = useState(INITIAL_CASES);
            const [activeTab, setActiveTab] = useState('dashboard');
            const [selectedCase, setSelectedCase] = useState(null);
            const [sidebarOpen, setSidebarOpen] = useState(true);
            const [currentUser, setCurrentUser] = useState({ role: 'clinic', name: 'Dr. Alejandro Belmonte', org: 'Clínica Dental Sonrisas' });
            
            // Stats
            const stats = {
                active: cases.filter(c => c.status !== 'sent' && c.status !== 'finished').length,
                urgent: cases.filter(c => c.priority === 'high' && c.status !== 'sent').length,
                finished: cases.filter(c => c.status === 'finished').length,
                delayed: cases.filter(c => new Date(c.dueDate) < new Date() && c.status !== 'sent').length
            };

            const handleRoleSwitch = (role) => {
                if (role === 'clinic') setCurrentUser({ role: 'clinic', name: 'Dr. Alejandro Belmonte', org: 'Clínica Dental Sonrisas' });
                else setCurrentUser({ role: 'lab', name: 'Téc. Iman Satour', org: 'Laboratorio Pro-Tech' });
            };

            // Vistas simplificadas para archivo único
            const renderDashboard = () => (
                <div className="space-y-6 fade-in pb-10">
                    <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <StatCard title="En Proceso" value={stats.active} icon={<Clock className="text-blue-500" />} color="bg-blue-50" />
                        <StatCard title="Urgentes" value={stats.urgent} icon={<AlertCircle className="text-red-500" />} color="bg-red-50" />
                        <StatCard title="Para Enviar" value={stats.finished} icon={<CheckCircle2 className="text-green-500" />} color="bg-green-50" />
                        <StatCard title="Retrasados" value={stats.delayed} icon={<CalendarIcon className="text-orange-500" />} color="bg-orange-50" />
                    </div>
                    <div className="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                        <h3 className="font-semibold text-slate-800 mb-4">Trabajos Recientes</h3>
                        <div className="divide-y divide-slate-100">
                            {cases.slice(0,3).map(c => (
                                <div key={c.id} onClick={() => setSelectedCase(c)} className="py-3 flex justify-between items-center cursor-pointer hover:bg-slate-50 p-2 rounded">
                                    <div className="flex items-center gap-3">
                                        <div className="w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-500"><Package size={16}/></div>
                                        <div>
                                            <p className="font-medium text-slate-900 text-sm">{c.patientInitials}</p>
                                            <p className="text-xs text-slate-500">{c.type}</p>
                                        </div>
                                    </div>
                                    <StatusBadge status={c.status}/>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );

            const renderCaseDetail = () => {
                if(!selectedCase) return null;
                return (
                    <div className="space-y-6 fade-in pb-10">
                        <button onClick={() => setSelectedCase(null)} className="text-sm text-slate-500 hover:text-slate-800 flex items-center gap-1"><ChevronLeft size={16}/> Volver</button>
                        <div className="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                            <div className="flex justify-between items-start">
                                <div>
                                    <h1 className="text-2xl font-bold text-slate-800 flex items-center gap-2">{selectedCase.patientInitials} <PriorityBadge priority={selectedCase.priority}/></h1>
                                    <p className="text-slate-500 text-sm">{selectedCase.type} - {selectedCase.teeth}</p>
                                </div>
                                <StatusBadge status={selectedCase.status}/>
                            </div>
                            
                            {/* Acciones Lab */}
                            {currentUser.role === 'lab' && (
                                <div className="mt-4 flex gap-2 border-t pt-4">
                                    <span className="text-xs font-bold text-slate-400 uppercase tracking-wide py-2">Acciones de Lab:</span>
                                    {selectedCase.status === 'received' && <button className="px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700" onClick={() => {
                                        setCases(cases.map(c => c.id === selectedCase.id ? {...c, status: 'design'} : c));
                                        setSelectedCase({...selectedCase, status: 'design'});
                                    }}>Iniciar Diseño</button>}
                                    {selectedCase.status === 'design' && <button className="px-3 py-1 bg-purple-600 text-white rounded text-sm hover:bg-purple-700" onClick={() => {
                                        setCases(cases.map(c => c.id === selectedCase.id ? {...c, status: 'production'} : c));
                                        setSelectedCase({...selectedCase, status: 'production'});
                                    }}>Pasar a Producción</button>}
                                </div>
                            )}

                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                                <div className="bg-slate-50 p-4 rounded-lg border border-slate-100">
                                    <h4 className="font-semibold text-sm mb-2 flex items-center gap-2"><FileText size={16}/> Instrucciones</h4>
                                    <p className="text-sm text-slate-600">{selectedCase.description}</p>
                                </div>
                                <div className="bg-slate-50 p-4 rounded-lg border border-slate-100">
                                    <h4 className="font-semibold text-sm mb-2 flex items-center gap-2"><MessageSquare size={16}/> Chat del Caso</h4>
                                    <div className="space-y-2 max-h-40 overflow-y-auto mb-2">
                                        {selectedCase.messages.map((m, i) => (
                                            <div key={i} className={`text-xs p-2 rounded ${m.role === currentUser.role ? 'bg-indigo-100 ml-4' : 'bg-white border mr-4'}`}>
                                                <span className="font-bold">{m.user}:</span> {m.text}
                                            </div>
                                        ))}
                                    </div>
                                    <div className="flex gap-2">
                                        <input type="text" placeholder="Escribir..." className="flex-1 text-sm border rounded px-2 py-1" id="chatInput" />
                                        <button className="bg-indigo-600 text-white px-3 rounded" onClick={() => {
                                            const input = document.getElementById('chatInput');
                                            if(input.value) {
                                                const newMsg = { sender: currentUser.role, user: currentUser.name, text: input.value, time: new Date().toLocaleTimeString(), role: currentUser.role };
                                                const updatedCase = { ...selectedCase, messages: [...selectedCase.messages, newMsg] };
                                                setCases(cases.map(c => c.id === selectedCase.id ? updatedCase : c));
                                                setSelectedCase(updatedCase);
                                                input.value = '';
                                            }
                                        }}><Send size={14}/></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            const renderCasesList = () => (
                <div className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden fade-in">
                    <table className="w-full text-left">
                        <thead className="bg-slate-50 text-xs text-slate-500 uppercase">
                            <tr><th className="px-6 py-3">ID</th><th className="px-6 py-3">Paciente</th><th className="px-6 py-3">Estado</th><th className="px-6 py-3">Acción</th></tr>
                        </thead>
                        <tbody className="divide-y divide-slate-100">
                            {cases.map(c => (
                                <tr key={c.id} className="hover:bg-slate-50">
                                    <td className="px-6 py-4 text-sm font-medium">{c.id}</td>
                                    <td className="px-6 py-4 text-sm">{c.patientInitials}</td>
                                    <td className="px-6 py-4"><StatusBadge status={c.status}/></td>
                                    <td className="px-6 py-4"><button className="text-indigo-600 text-sm font-medium hover:underline" onClick={() => setSelectedCase(c)}>Ver</button></td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
            );

            const renderPatients = () => (
                <div className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden fade-in">
                    <div className="p-4 border-b border-slate-100 font-semibold">Directorio de Pacientes</div>
                    <table className="w-full text-left">
                        <thead className="bg-slate-50 text-xs text-slate-500 uppercase">
                            <tr><th className="px-6 py-3">Nombre</th><th className="px-6 py-3">Edad</th><th className="px-6 py-3">Teléfono</th><th className="px-6 py-3">Estado</th></tr>
                        </thead>
                        <tbody className="divide-y divide-slate-100">
                            {INITIAL_PATIENTS.map(p => (
                                <tr key={p.id} className="hover:bg-slate-50">
                                    <td className="px-6 py-4 text-sm font-medium">{p.name}</td>
                                    <td className="px-6 py-4 text-sm">{p.age}</td>
                                    <td className="px-6 py-4 text-sm">{p.phone}</td>
                                    <td className="px-6 py-4 text-sm"><span className="bg-green-100 text-green-700 px-2 py-0.5 rounded text-xs">{p.status}</span></td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
            );

            return (
                <div className="flex h-screen bg-slate-50 font-sans text-slate-800">
                    <aside className={`${sidebarOpen ? 'w-64' : 'w-20'} bg-white border-r border-slate-200 transition-all duration-300 flex flex-col z-20`}>
                        <div className="h-16 flex items-center justify-between px-4 border-b border-slate-100">
                            {sidebarOpen && <div className="font-bold text-xl text-indigo-600 flex items-center gap-2"><Stethoscope size={18} /> Dental Track</div>}
                            <button onClick={() => setSidebarOpen(!sidebarOpen)} className="p-1 text-slate-400 hover:bg-slate-100 rounded">{sidebarOpen ? <X size={20} /> : <Menu size={20} />}</button>
                        </div>
                        <nav className="flex-1 py-6 px-2 space-y-1">
                            <NavItem icon={LayoutDashboard} label="Panel" active={activeTab === 'dashboard'} collapsed={!sidebarOpen} onClick={() => {setActiveTab('dashboard'); setSelectedCase(null);}} />
                            <NavItem icon={FolderPlus} label="Casos" active={activeTab === 'cases'} collapsed={!sidebarOpen} onClick={() => {setActiveTab('cases'); setSelectedCase(null);}} />
                            <NavItem icon={Users} label="Pacientes" active={activeTab === 'patients'} collapsed={!sidebarOpen} onClick={() => {setActiveTab('patients'); setSelectedCase(null);}} />
                        </nav>
                        <div className="p-4 border-t border-slate-100">
                            <div className={`w-10 h-10 mx-auto rounded-full flex items-center justify-center text-white font-bold ${currentUser.role === 'clinic' ? 'bg-cyan-500' : 'bg-purple-500'}`}>
                                {currentUser.name.charAt(0)}
                            </div>
                            {sidebarOpen && <p className="text-xs text-center mt-2 text-slate-500">{currentUser.name}</p>}
                        </div>
                    </aside>
                    <main className="flex-1 flex flex-col overflow-hidden relative">
                        <header className="h-16 bg-white border-b border-slate-200 flex items-center justify-between px-6 z-10">
                            <h2 className="text-lg font-semibold text-slate-700 capitalize">{activeTab}</h2>
                            <div className="flex items-center gap-2 bg-slate-100 p-1 rounded-lg">
                                <button onClick={() => handleRoleSwitch('clinic')} className={`px-3 py-1 text-xs font-medium rounded ${currentUser.role === 'clinic' ? 'bg-white shadow text-cyan-700' : 'text-slate-500'}`}>Clínica</button>
                                <button onClick={() => handleRoleSwitch('lab')} className={`px-3 py-1 text-xs font-medium rounded ${currentUser.role === 'lab' ? 'bg-white shadow text-purple-700' : 'text-slate-500'}`}>Lab</button>
                            </div>
                        </header>
                        <div className="flex-1 overflow-auto p-6">
                            {selectedCase ? renderCaseDetail() : 
                             activeTab === 'dashboard' ? renderDashboard() :
                             activeTab === 'cases' ? renderCasesList() :
                             activeTab === 'patients' ? renderPatients() :
                             renderDashboard()}
                        </div>
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
